{"version":3,"sources":["../src/recorderhelper.js"],"names":["define","$","log","cloudpoodll","debug","status","init","opts","on_recording_start","on_recording_end","on_audio_processing","that","message","console","type","action","startbuttonclick","stopbuttonclick"],"mappings":"AAAAA,OAAM,mCAAC,CAAC,QAAD,CAAU,UAAV,CAAqB,oCAArB,CAAD,CAA6D,SAASC,CAAT,CAAWC,CAAX,CAAgBC,CAAhB,CAA6B,CAC5F,aAOAD,CAAG,CAACE,KAAJ,CAAU,4CAAV,EAEA,MAAM,CAEFC,MAAM,CAAE,SAFN,CAIFC,IAAI,CAAE,cAASC,CAAT,CAAcC,CAAd,CACFC,CADE,CAEFC,CAFE,CAEkB,CAEpB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CAEAR,CAAW,CAACG,IAAZ,CAAiBC,CAAI,WAArB,CAEI,SAASK,CAAT,CAAiB,CACbC,OAAO,CAACX,GAAR,CAAYU,CAAZ,EACA,OAAOA,CAAO,CAACE,IAAf,EACI,IAAK,WAAL,CACI,GAAoB,SAAjB,GAAAF,CAAO,CAACG,MAAX,CAA8B,CAC1BJ,CAAI,CAACK,gBAAL,GACAR,CAAkB,CAACI,CAAD,CAErB,CAJD,IAIM,IAAoB,SAAjB,GAAAA,CAAO,CAACG,MAAX,CAA8B,CAChCJ,CAAI,CAACM,eAAL,GACAR,CAAgB,CAACG,CAAD,CACnB,CACD,MACJ,IAAK,oBAAL,CAEI,GAAgB,QAAb,EAAAD,CAAI,CAACN,MAAR,CAA0B,CACtBK,CAAmB,CAACE,CAAD,CACtB,CACDD,CAAI,CAACN,MAAL,CAAY,QAAZ,CACA,MAjBR,CAmBH,CAvBL,CAyBH,CAnCC,CAoCFY,eAAe,CAAE,0BAAU,CACf,IADe,CAEvB,KAAKZ,MAAL,CAAY,SAEf,CAxCC,CAyCFW,gBAAgB,CAAE,2BAAU,CAChB,IADgB,CAExB,KAAKX,MAAL,CAAY,SAEf,CA7CC,CAgDT,CA1DK,CAAN","sourcesContent":["define(['jquery','core/log','mod_cpassignment/cloudpoodllloader'], function($,log, cloudpoodll) {\n    \"use strict\"; // jshint ;_;\n/*\nThis file is largely to handle recorder specific tasks, configuring it , loading it, its appearance for the ActivityController\nIt should not be concerned with anything non recorder'ish like elements on the page around\nRelationships between the recorder and the surrounding elements should be managed via event handlers in activity controller\n */\n\n    log.debug('cpassignment recorder helper: initialising');\n\n    return{\n\n        status: 'stopped',\n\n        init: function(opts,on_recording_start,\n            on_recording_end,\n            on_audio_processing){\n\n            var that = this;\n\n            cloudpoodll.init(opts['recorderid'],\n\n                function(message){\n                    console.log(message);\n                    switch(message.type){\n                        case 'recording':\n                            if(message.action==='started'){\n                                that.startbuttonclick();\n                                on_recording_start(message);\n\n                            }else if(message.action==='stopped'){\n                                that.stopbuttonclick();\n                                on_recording_end(message);\n                            }\n                            break;\n                        case 'awaitingprocessing':\n                            //awaitingprocessing fires often, but we only want to post once\n                            if(that.status!='posted') {\n                                on_audio_processing(message);\n                            }\n                            that.status='posted';\n                            break;\n                    }\n                }\n            );\n        },\n        stopbuttonclick: function(){\n            var m = this;\n            this.status='stopped';\n            //do something\n        },\n        startbuttonclick: function(){\n            var m = this;\n            this.status='started';\n           //do something\n        }\n\n    };//end of return value\n});"],"file":"recorderhelper.min.js"}