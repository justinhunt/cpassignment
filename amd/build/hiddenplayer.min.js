define ("mod_cpassignment/hiddenplayer",["jquery","core/log","mod_cpassignment/dialogs"],function(a,b,c){"use strict";b.debug("cpassignment hidden player: initialising");return{controls:{},mediatype:null,overallcontainer:"mod_cpassignment_attempts_cont",hiddenplayer:"mod_cpassignment_hidden_player",hiddenplayerbutton:"mod_cpassignment_hidden_player_button",hiddenvideoplayer:"mod_cpassignment_hidden_video_player",videoplayercontainer:"mod_cpassignment_hiddenvideocontainer",activebutton:"mod_cpassignment_hidden_player_button_active",activebuttonpaused:"mod_cpassignment_hidden_player_button_paused",activebuttonplaying:"mod_cpassignment_hidden_player_button_playing",init:function init(a){this.mediatype=a.mediatype;this.hiddenplayer=a.hiddenplayerclass;this.hiddenplayerbutton=a.hiddenplayerbuttonclass;this.register_controls();this.register_events()},register_controls:function register_controls(){this.controls.overallcontainer=a("."+this.overallcontainer);this.controls.hiddenplayer=a("."+this.hiddenplayer);this.controls.hiddenvideoplayer=a("."+this.hiddenvideoplayer);this.controls.hiddenplayerbutton=a("."+this.hiddenplayerbutton)},register_events:function register_events(){var b=this,c=this.controls.hiddenplayer;a("body").on("click","."+this.hiddenplayerbutton,function(){switch(b.mediatype){case"video":var d=a(this).attr("data-audiosource");b.dohiddenvideoplay(d);break;case"audio":default:var d=a(this).attr("data-audiosource");if(d==c.attr("src")&&!c.prop("paused")){b.dohiddenstop()}else{b.dohiddenaudioplay(d)}}})},dohiddenaudioplay:function dohiddenaudioplay(a){var b=this,c=b.controls.hiddenplayer;c.attr("src",a);c[0].pause();c[0].load();var d=c[0].play();if(d!==void 0){d.then(function(){}).catch(function(){})}b.dobuttonicons()},dohiddenvideoplay:function dohiddenvideoplay(a){var b=this,d=b.controls.hiddenvideoplayer;d.attr("src",a);d[0].pause();d[0].load();var e=d[0].play();if(e!==void 0){e.then(function(){}).catch(function(){})}c.openModal("#"+b.videoplayercontainer);b.dobuttonicons()},dohiddenstop:function dohiddenstop(){var a=this,b=a.controls.hiddenplayer;b[0].pause();a.dobuttonicons()},dobuttonicons:function dobuttonicons(b){var c=this,d=c.controls.hiddenplayer;if(!b){b=d.attr("src")}c.controls.hiddenplayerbutton.each(function(){var e=a(this).attr("data-audiosource");if(e==b){a(this).addClass(c.activebutton);if(d.prop("paused")){a(this).removeClass(c.activebuttonplaying);a(this).addClass(c.activebuttonpaused);a(this).removeClass(c.activebutton)}else{a(this).removeClass(c.activebuttonpaused);a(this).addClass(c.activebuttonplaying)}}else{a(this).removeClass(c.activebutton);a(this).removeClass(c.activebuttonplaying);a(this).removeClass(c.activebuttonpaused)}})}}});
//# sourceMappingURL=hiddenplayer.min.js.map
