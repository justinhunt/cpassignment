define(["jquery","core/log","mod_cpassignment/dialogs"],(function($,log,dialogs){return log.debug("cpassignment hidden player: initialising"),{controls:{},mediatype:null,overallcontainer:"mod_cpassignment_attempts_cont",hiddenplayer:"mod_cpassignment_hidden_player",hiddenplayerbutton:"mod_cpassignment_hidden_player_button",hiddenvideoplayer:"mod_cpassignment_hidden_video_player",videoplayercontainer:"mod_cpassignment_hiddenvideocontainer",activebutton:"mod_cpassignment_hidden_player_button_active",activebuttonpaused:"mod_cpassignment_hidden_player_button_paused",activebuttonplaying:"mod_cpassignment_hidden_player_button_playing",init:function(opts){this.mediatype=opts.mediatype,this.hiddenplayer=opts.hiddenplayerclass,this.hiddenplayerbutton=opts.hiddenplayerbuttonclass,this.register_controls(),this.register_events()},register_controls:function(){this.controls.overallcontainer=$("."+this.overallcontainer),this.controls.hiddenplayer=$("."+this.hiddenplayer),this.controls.hiddenvideoplayer=$("."+this.hiddenvideoplayer),this.controls.hiddenplayerbutton=$("."+this.hiddenplayerbutton)},register_events:function(){var that=this,audioplayer=this.controls.hiddenplayer;$("body").on("click","."+this.hiddenplayerbutton,(function(e){if("video"===that.mediatype){var mediasrc=$(this).attr("data-audiosource");that.dohiddenvideoplay(mediasrc)}else{(mediasrc=$(this).attr("data-audiosource"))!=audioplayer.attr("src")||audioplayer.prop("paused")?that.dohiddenaudioplay(mediasrc):that.dohiddenstop()}}))},dohiddenaudioplay:function(mediasrc){var audioplayer=this.controls.hiddenplayer;audioplayer.attr("src",mediasrc),audioplayer[0].pause(),audioplayer[0].load();var pp=audioplayer[0].play();void 0!==pp&&pp.then((function(){})).catch((function(error){})),this.dobuttonicons()},dohiddenvideoplay:function(mediasrc){var m=this,videoplayer=m.controls.hiddenvideoplayer;videoplayer.attr("src",mediasrc),videoplayer[0].pause(),videoplayer[0].load();var pp=videoplayer[0].play();void 0!==pp&&pp.then((function(){})).catch((function(error){})),dialogs.openModal("#"+m.videoplayercontainer),m.dobuttonicons()},dohiddenstop:function(){this.controls.hiddenplayer[0].pause(),this.dobuttonicons()},dobuttonicons:function(theaudiosrc){var m=this,audioplayer=m.controls.hiddenplayer;theaudiosrc||(theaudiosrc=audioplayer.attr("src")),m.controls.hiddenplayerbutton.each((function(index){$(this).attr("data-audiosource")==theaudiosrc?($(this).addClass(m.activebutton),audioplayer.prop("paused")?($(this).removeClass(m.activebuttonplaying),$(this).addClass(m.activebuttonpaused),$(this).removeClass(m.activebutton)):($(this).removeClass(m.activebuttonpaused),$(this).addClass(m.activebuttonplaying))):($(this).removeClass(m.activebutton),$(this).removeClass(m.activebuttonplaying),$(this).removeClass(m.activebuttonpaused))}))}}}));

//# sourceMappingURL=hiddenplayer.min.js.map