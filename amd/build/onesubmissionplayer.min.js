define ("mod_cpassignment/onesubmissionplayer",["jquery","core/log"],function(a,b){"use strict";b.debug("cpassignment one submission: initialising");return{controls:{},selectedattempt:!1,audioplayerclass:"mod_cpassignment_oneattempt_audio",videoplayerclass:"mod_cpassignment_oneattempt_video",attemptstableclass:"mod_cpassignment_myattemptstable",attemptrowclass:"mod_cpassignment_attemptrow",selectattemptbuttonclass:"mod_cpassignment_selectattempt",selectedattemptlabelclass:"mod_cpassignment_selectedattemptlabel",selectedattemptclass:"selected_attempt",init:function init(b){this.selectedattempt=b.selectedattempt;this.register_controls();this.register_events();if(this.selectedattempt){var c=a("."+this.attemptrowclass+"[data-attemptid="+this.selectedattempt+"]");this.doLayout(c)}},register_controls:function register_controls(){this.controls.audioplayer=a("#"+this.audioplayerclass);this.controls.videoplayer=a("#"+this.videoplayerclass);this.controls.attemptstable=a("."+this.attemptstableclass);this.controls.selectattemptbutton=a("."+this.selectattemptbuttonclass)},register_events:function register_events(){var a=this;this.controls.attemptstable.on("click","."+this.attemptrowclass,function(){a.doLayout(this)})},doLayout:function doLayout(b){a("."+this.attemptrowclass).removeClass(this.selectedattemptclass);a(b).addClass(this.selectedattemptclass);var c=a(b).attr("data-mediasource"),d="none";if(c){d=c.toLowerCase().endsWith(".mp4")?"video":"audio"}switch(d){case"none":this.controls.audioplayer.hide();this.controls.videoplayer.hide();this.controls.audioplayer.attr("src","");this.controls.videoplayer.attr("src","");case"video":this.controls.audioplayer.hide();this.controls.videoplayer.show();this.controls.audioplayer.attr("src","");this.controls.videoplayer.attr("src",c);break;case"audio":default:this.controls.videoplayer.hide();this.controls.audioplayer.show();this.controls.audioplayer.attr("src",c);this.controls.videoplayer.attr("src","");}this.selectedattempt=a(b).attr("data-attemptid");this.controls.selectattemptbutton.attr("data-attemptid",this.selectedattempt);this.controls.selectattemptbutton.show()}}});
//# sourceMappingURL=onesubmissionplayer.min.js.map
