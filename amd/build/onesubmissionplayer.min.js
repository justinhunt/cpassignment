define(["jquery","core/log"],function(a,b){"use strict";return b.debug("cpassignment one submission: initialising"),{controls:{},selectedattempt:!1,audioplayerclass:"mod_cpassignment_oneattempt_audio",videoplayerclass:"mod_cpassignment_oneattempt_video",attemptstableclass:"mod_cpassignment_myattemptstable",attemptrowclass:"mod_cpassignment_attemptrow",selectattemptbuttonclass:"mod_cpassignment_selectattempt",selectedattemptlabelclass:"mod_cpassignment_selectedattemptlabel",selectedattemptclass:"selected_attempt",init:function(b){if(this.selectedattempt=b.selectedattempt,this.register_controls(),this.register_events(),this.selectedattempt){var c=a("."+this.attemptrowclass+"[data-attemptid="+this.selectedattempt+"]");this.doLayout(c)}},register_controls:function(){this.controls.audioplayer=a("#"+this.audioplayerclass),this.controls.videoplayer=a("#"+this.videoplayerclass),this.controls.attemptstable=a("."+this.attemptstableclass),this.controls.selectattemptbutton=a("."+this.selectattemptbuttonclass)},register_events:function(){var a=this;this.controls.attemptstable.on("click","."+this.attemptrowclass,function(b){a.doLayout(this)})},doLayout:function(b){a("."+this.attemptrowclass).removeClass(this.selectedattemptclass),a(b).addClass(this.selectedattemptclass);var c=a(b).attr("data-mediasource"),d="none";switch(c&&(d=c.toLowerCase().endsWith(".mp4")?"video":"audio"),d){case"none":this.controls.audioplayer.hide(),this.controls.videoplayer.hide(),this.controls.audioplayer.attr("src",""),this.controls.videoplayer.attr("src","");case"video":this.controls.audioplayer.hide(),this.controls.videoplayer.show(),this.controls.audioplayer.attr("src",""),this.controls.videoplayer.attr("src",c);break;case"audio":default:this.controls.videoplayer.hide(),this.controls.audioplayer.show(),this.controls.audioplayer.attr("src",c),this.controls.videoplayer.attr("src","")}this.selectedattempt=a(b).attr("data-attemptid"),this.controls.selectattemptbutton.attr("data-attemptid",this.selectedattempt),this.controls.selectattemptbutton.show()}}});