{"version":3,"sources":["../src/onesubmissionplayer.js"],"names":["define","$","log","debug","controls","selectedattempt","audioplayerclass","videoplayerclass","attemptstableclass","attemptrowclass","selectattemptbuttonclass","selectedattemptlabelclass","selectedattemptclass","init","opts","register_controls","register_events","selectedrow","doLayout","audioplayer","videoplayer","attemptstable","selectattemptbutton","that","on","removeClass","addClass","mediasrc","attr","mediatype","toLowerCase","endsWith","hide","show"],"mappings":"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","sourcesContent":["define(['jquery', 'core/log'], function($,log) {\n    \"use strict\"; // jshint ;_;\n\n    log.debug('cpassignment one submission: initialising');\n\n    return {\n\n        controls: {},\n        selectedattempt: false,\n        audioplayerclass: 'mod_cpassignment_oneattempt_audio',\n        videoplayerclass: 'mod_cpassignment_oneattempt_video',\n        attemptstableclass: 'mod_cpassignment_myattemptstable',\n        attemptrowclass: 'mod_cpassignment_attemptrow',\n        selectattemptbuttonclass: 'mod_cpassignment_selectattempt',\n        selectedattemptlabelclass: 'mod_cpassignment_selectedattemptlabel',\n        selectedattemptclass: 'selected_attempt',\n\n        init: function (opts) {\n\n            this.selectedattempt = opts['selectedattempt'];\n            this.register_controls();\n            this.register_events();\n            if(this.selectedattempt) {\n                var selectedrow = $('.' + this.attemptrowclass + '[data-attemptid=' + this.selectedattempt + ']');\n                this.doLayout(selectedrow);\n            }\n        },\n\n        register_controls: function(){\n\n            this.controls.audioplayer = $('#' + this.audioplayerclass);\n            this.controls.videoplayer = $('#' + this.videoplayerclass);\n            this.controls.attemptstable = $('.' + this.attemptstableclass);\n            this.controls.selectattemptbutton = $('.' + this.selectattemptbuttonclass);\n\n        },\n\n        register_events: function(){\n            var that = this;\n\n            //handle the button click\n            this.controls.attemptstable.on('click','.' + this.attemptrowclass, function(e){\n                that.doLayout(this);\n            });\n\n        },\n\n        doLayout: function(selectedrow){\n            //highlight de-highlight rows\n            $('.' + this.attemptrowclass).removeClass(this.selectedattemptclass);\n            $(selectedrow).addClass(this.selectedattemptclass);\n\n\n            //fetch media url and media type\n            var mediasrc = $(selectedrow).attr('data-mediasource');\n            var mediatype = 'none';\n            if(mediasrc) {\n                mediatype = mediasrc.toLowerCase().endsWith('.mp4') ? 'video' : 'audio';\n            }\n            switch(mediatype){\n                case 'none':\n                    this.controls.audioplayer.hide();\n                    this.controls.videoplayer.hide();\n                    this.controls.audioplayer.attr('src', '');\n                    this.controls.videoplayer.attr('src', '');\n\n                case 'video':\n                    this.controls.audioplayer.hide();\n                    this.controls.videoplayer.show();\n                    this.controls.audioplayer.attr('src', '');\n                    this.controls.videoplayer.attr('src', mediasrc);\n                    break;\n\n                case 'audio':\n                default:\n                    this.controls.videoplayer.hide();\n                    this.controls.audioplayer.show();\n                    this.controls.audioplayer.attr('src', mediasrc);\n                    this.controls.videoplayer.attr('src', '');\n            }\n            this.selectedattempt =  $(selectedrow).attr('data-attemptid');\n            this.controls.selectattemptbutton.attr('data-attemptid',this.selectedattempt);\n            this.controls.selectattemptbutton.show();\n        }\n\n    };//end of return object\n\n});"],"file":"onesubmissionplayer.min.js"}