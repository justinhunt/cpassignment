{"version":3,"file":"onesubmissionplayer.min.js","sources":["../src/onesubmissionplayer.js"],"sourcesContent":["define(['jquery', 'core/log'], function($,log) {\n    \"use strict\"; // jshint ;_;\n\n    log.debug('cpassignment one submission: initialising');\n\n    return {\n\n        controls: {},\n        selectedattempt: false,\n        audioplayerclass: 'mod_cpassignment_oneattempt_audio',\n        videoplayerclass: 'mod_cpassignment_oneattempt_video',\n        attemptstableclass: 'mod_cpassignment_myattemptstable',\n        attemptrowclass: 'mod_cpassignment_attemptrow',\n        selectattemptbuttonclass: 'mod_cpassignment_selectattempt',\n        selectedattemptlabelclass: 'mod_cpassignment_selectedattemptlabel',\n        selectedattemptclass: 'selected_attempt',\n\n        init: function (opts) {\n\n            this.selectedattempt = opts['selectedattempt'];\n            this.register_controls();\n            this.register_events();\n            if(this.selectedattempt) {\n                var selectedrow = $('.' + this.attemptrowclass + '[data-attemptid=' + this.selectedattempt + ']');\n                this.doLayout(selectedrow);\n            }\n        },\n\n        register_controls: function(){\n\n            this.controls.audioplayer = $('#' + this.audioplayerclass);\n            this.controls.videoplayer = $('#' + this.videoplayerclass);\n            this.controls.attemptstable = $('.' + this.attemptstableclass);\n            this.controls.selectattemptbutton = $('.' + this.selectattemptbuttonclass);\n\n        },\n\n        register_events: function(){\n            var that = this;\n\n            //handle the button click\n            this.controls.attemptstable.on('click','.' + this.attemptrowclass, function(e){\n                that.doLayout(this);\n            });\n\n        },\n\n        doLayout: function(selectedrow){\n            //highlight de-highlight rows\n            $('.' + this.attemptrowclass).removeClass(this.selectedattemptclass);\n            $(selectedrow).addClass(this.selectedattemptclass);\n\n\n            //fetch media url and media type\n            var mediasrc = $(selectedrow).attr('data-mediasource');\n            var mediatype = 'none';\n            if(mediasrc) {\n                mediatype = mediasrc.toLowerCase().endsWith('.mp4') ? 'video' : 'audio';\n            }\n            switch(mediatype){\n                case 'none':\n                    this.controls.audioplayer.hide();\n                    this.controls.videoplayer.hide();\n                    this.controls.audioplayer.attr('src', '');\n                    this.controls.videoplayer.attr('src', '');\n\n                case 'video':\n                    this.controls.audioplayer.hide();\n                    this.controls.videoplayer.show();\n                    this.controls.audioplayer.attr('src', '');\n                    this.controls.videoplayer.attr('src', mediasrc);\n                    break;\n\n                case 'audio':\n                default:\n                    this.controls.videoplayer.hide();\n                    this.controls.audioplayer.show();\n                    this.controls.audioplayer.attr('src', mediasrc);\n                    this.controls.videoplayer.attr('src', '');\n            }\n            this.selectedattempt =  $(selectedrow).attr('data-attemptid');\n            this.controls.selectattemptbutton.attr('data-attemptid',this.selectedattempt);\n            this.controls.selectattemptbutton.show();\n        }\n\n    };//end of return object\n\n});"],"names":["define","$","log","debug","controls","selectedattempt","audioplayerclass","videoplayerclass","attemptstableclass","attemptrowclass","selectattemptbuttonclass","selectedattemptlabelclass","selectedattemptclass","init","opts","register_controls","register_events","this","selectedrow","doLayout","audioplayer","videoplayer","attemptstable","selectattemptbutton","that","on","e","removeClass","addClass","mediasrc","attr","mediatype","toLowerCase","endsWith","hide","show"],"mappings":"AAAAA,8CAAO,CAAC,SAAU,aAAa,SAASC,EAAEC,YAGtCA,IAAIC,MAAM,6CAEH,CAEHC,SAAU,GACVC,iBAAiB,EACjBC,iBAAkB,oCAClBC,iBAAkB,oCAClBC,mBAAoB,mCACpBC,gBAAiB,8BACjBC,yBAA0B,iCAC1BC,0BAA2B,wCAC3BC,qBAAsB,mBAEtBC,KAAM,SAAUC,cAEPT,gBAAkBS,KAAI,qBACtBC,yBACAC,kBACFC,KAAKZ,gBAAiB,KACjBa,YAAcjB,EAAE,IAAMgB,KAAKR,gBAAkB,mBAAqBQ,KAAKZ,gBAAkB,UACxFc,SAASD,eAItBH,kBAAmB,gBAEVX,SAASgB,YAAcnB,EAAE,IAAMgB,KAAKX,uBACpCF,SAASiB,YAAcpB,EAAE,IAAMgB,KAAKV,uBACpCH,SAASkB,cAAgBrB,EAAE,IAAMgB,KAAKT,yBACtCJ,SAASmB,oBAAsBtB,EAAE,IAAMgB,KAAKP,2BAIrDM,gBAAiB,eACTQ,KAAOP,UAGNb,SAASkB,cAAcG,GAAG,QAAQ,IAAMR,KAAKR,iBAAiB,SAASiB,GACxEF,KAAKL,SAASF,UAKtBE,SAAU,SAASD,aAEfjB,EAAE,IAAMgB,KAAKR,iBAAiBkB,YAAYV,KAAKL,sBAC/CX,EAAEiB,aAAaU,SAASX,KAAKL,0BAIzBiB,SAAW5B,EAAEiB,aAAaY,KAAK,oBAC/BC,UAAY,cACbF,WACCE,UAAYF,SAASG,cAAcC,SAAS,QAAU,QAAU,SAE7DF,eACE,YACI3B,SAASgB,YAAYc,YACrB9B,SAASiB,YAAYa,YACrB9B,SAASgB,YAAYU,KAAK,MAAO,SACjC1B,SAASiB,YAAYS,KAAK,MAAO,QAErC,aACI1B,SAASgB,YAAYc,YACrB9B,SAASiB,YAAYc,YACrB/B,SAASgB,YAAYU,KAAK,MAAO,SACjC1B,SAASiB,YAAYS,KAAK,MAAOD,6BAKjCzB,SAASiB,YAAYa,YACrB9B,SAASgB,YAAYe,YACrB/B,SAASgB,YAAYU,KAAK,MAAOD,eACjCzB,SAASiB,YAAYS,KAAK,MAAO,SAEzCzB,gBAAmBJ,EAAEiB,aAAaY,KAAK,uBACvC1B,SAASmB,oBAAoBO,KAAK,iBAAiBb,KAAKZ,sBACxDD,SAASmB,oBAAoBY"}